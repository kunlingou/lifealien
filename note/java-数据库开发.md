## java-数据库开发

### 数据库优化

#### 优化层次

- 语句上的优化：尽量不要使用多表查询，尽量不要频繁的使用各种神奇的统计查询，建议使用子查询来代替。
- 数据库优化只能体现在查询上，例如使用索引，但是一旦使用了索引就不能够进行频繁的修改，例如：在主键往往会设置索引，但是从另外一个角度，数据不应该进行物理删除，而要进行逻辑删除，只是为了保证索引不被重新创建；
  - 空间换时间、时间换空间：你的数据是否需要进行同步处理操作。
- 当存在有多个RPC业务端时，可以考虑进行垂直拆库的做法，这时只能按照功能进行拆分，需要强大的接口技术支持。
- 当分库无法解决问题时，需要考虑数据库的水平拆分。
- 如果需要保证强大的查询性能，那么就需要再次引入搜索引擎的概念进行分词处理。

### NoSQL

#### 作用

- 文档存储（BSON、JSON）
- 缓存存储
- 图像缓存（图像搜索）

#### 备注

- 在传统开发中经常用到多表查询，性能很差，可以将一些经常显示的数据整理到文档型的NoSQL数据库(MongoDB)、使用很少。
- 缓存型：例如在进行分布式开发的时候session存储、做一下临时的数据，例如：购物车、短信验证码等，现在使用最多的缓存数据库就是redis（可以保存在磁盘，断电后数据可以被保留下来）
  - 使用redis实现消息队列（很少），可以使用更高级的RabbitMQ、Kafka实现更方便。
  - 可以实现每秒近乎10W次的读写处理。

### 分布式数据库

#### 概念

- 业务中心
- RPC规划：业务分离
- web集群：Web服务代理(Nginx)、session共享
- SQL代理

![](D:\Code\lifealien\pic\2019-08-04_110937.jpg)

### 数据库设计

- 存储过程，无法实现秒杀等操作。

#### spring 事务

